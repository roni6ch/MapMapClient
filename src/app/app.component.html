<!-- NAV -->
<nav class="navbar navbar-expand-lg navbar-light" [ngClass]="{ 'searchClicked': search }">

  <a href="#" data-target="slide-out" class="sidenav-trigger" *ngIf="mobile" >
    <i class="material-icons">menu</i>
  </a>
  
    

  <!-- nav links -->
  <div id="navbar">
    <div class="logo left">
      <a href="#">
        <img src="assets/images/logo.png" class="logoImg"> MapMap</a>
    </div>

    <!--  <div class="form-inline my-2 my-lg-0 right smallSearch">
      <input #searchRef autocorrect="off" autocapitalize="off" spellcheck="off" class="form-control mr-sm-2 "
        type="search" placeholder="Search for location" aria-label="Search" (click)="openSearchInput()" (focusout)="focusOutSearch($event)">
    </div>
  -->
  <div class="userProfile webProfile" *ngIf="!mobile" >
      <!-- GOOGLE BUTTON (dont add here *ngIf - it needs to be on dom! ) -->
      <div class="googleBT">
        <google-signin [clientId]="myClientId" [width]="myWidth" theme="dark" [scope]="myScope" [longTitle]="myLongTitle" (googleSignInSuccess)="onGoogleSignInSuccess($event);">
        </google-signin>
      </div>
      <img [src]="profile['picture'] != null ? profile['picture'] : ''" class='signOut' [hidden]="connect" (click)="signOut()">
    </div>

  </div>
</nav>
<!-- Hamburger Menu -->
<ul id="slide-out" class="sidenav">
  <li>
    <div class="user-view">
      <div class="background">
        <img src="./assets/images/hamburgerBG.jpg">
      </div>
      <div class="userProfile">

        <!-- GOOGLE BUTTON (dont add here *ngIf - it needs to be on dom! ) -->
        <div class="googleBT">
          <google-signin [clientId]="myClientId" [width]="myWidth" theme="dark" [scope]="myScope" [longTitle]="myLongTitle" (googleSignInSuccess)="onGoogleSignInSuccess($event);">
          </google-signin>
        </div>

        <img [src]="profile['picture'] != null ? profile['picture'] : ''" class='signOut' [hidden]="connect" (click)="signOut()">
      </div>
      <div class="navDetails">
        <p>
          <span class="black-text name" [hidden]="connect">{{profile['given_name'] }} {{profile['family_name']}}</span>
        </p>
        <p>
          <span class="black-text email" [hidden]="connect">{{profile['email']}}</span>
        </p>
      </div>
    </div>
  </li>
  <li class="navOptions">
    <a href="#" data-toggle="modal" data-target="#newApartmentWindowModal">
      <i class="material-icons">publish</i>Publish</a>
  </li>


  <li class="navOptions">
    <a href="#" data-toggle="modal" data-target="#advancedFiltersModal">
      <i>
        <img src="assets/images/icons/funnel.png" />
      </i> Filters</a>
  </li>

  <li class="navOptions">
      <a href="#" (click)="showMap = !showMap">
        <i class="material-icons">list</i>
        {{showMap ? 'Table View' : 'Map View'}}</a>
  </li>

    <li class="navOptions">
        <a href="#" data-toggle="modal" data-target="#contracts">
            <i class="material-icons">attach_file</i> Contracts</a>
      </li>

  <li class="navOptions">
    <a href="#" [hidden]="connect" (click)="signOut()">
      <i class="material-icons">exit_to_app</i>
      Log Out</a>
      </li>

</ul>


  <!-- Tap Target Structure -->
  <div class="tap-target" data-target="menu">
      <div class="tap-target-content">
        <h5>MapMap</h5>
        <p>Have fun!</p>
      </div>
    </div>

<!-- Floating Action Button -->
<div class="fixed-action-btn"  [hidden]="mobile" id="menu">
  <a class="btn-floating btn-large red">
    <i class="large material-icons">menu</i>
  </a>
  <ul>
    <li>
      <a class="btn-floating red" data-toggle="modal" data-target="#newApartmentWindowModal">
        <span class="floatingText red">Add new Apartment</span>
        <i class="material-icons">publish</i>
      </a>
    </li>
    <li>
      <a class="btn-floating yellow darken-1" data-toggle="modal" data-target="#advancedFiltersModal">
        <span class="floatingText yellow darken-1">Filters</span>
        <img src="assets/images/icons/funnel.png" />
      </a>
    </li>
    <li>
      <a class="btn-floating green" (click)="changeView()">
        <span class="floatingText green">{{view}} View</span>
        <i class="material-icons">pageview</i>
      </a>
    </li>
    <li>
      <a class="btn-floating blue" data-toggle="modal" data-target="#contracts">
        <span class="floatingText blue">Contracts</span>
        <i class="material-icons">attach_file</i>
      </a>
    </li>
  </ul>
</div>


<!-- Search -->
<div class="searchField" [hidden]="view != 'Map'">
  <p class="resultsInfo">
    <span>מציג </span>
    <span>
      <b class="ng-binding"> {{apartmentsResults}}</b>
    </span>
    <span> תוצאות </span>
  </p>
  <input class="mapsAutoComplete" name="address" type="text" placeholder="הזן מיקום" autocomplete="off" #searchRef autocorrect="off"
    autocapitalize="off" spellcheck="off" type="search" placeholder="Search for location" (keydown)="keyDownEnter($event)"
    aria-label="Search" (click)="openSearchInput()" (focusout)="focusOutSearch($event)">
  <button class="btn-search btn  blue lighten-1 hvr-sweep-to-left">חפש</button>
</div>

<div class="blurSection" [ngClass]="{ 'blur': search }">
  <!-- Map -->
  <app-map [hidden]="view !== 'Map'" (apartmentsResults)="apartmentsResultsInput($event)" [latLng]="latLng" [filterFavoritesInput]="filterFavorites"
    [filtersInput]="filtersInput"></app-map>

  <!-- Table views go here -->
  <app-table [hidden]="view !== 'Table'" [latLng]="latLng" [filtersInput]="filtersInput"></app-table>

  <!-- Cards views go here -->
  <app-cards [hidden]="view !== 'Cards'"></app-cards>


  <!-- new Apartment -->
  <app-new-apartment-modal></app-new-apartment-modal>

  <!-- advanced Filter -->
  <app-advanced-filters (favoritesClick)="filterFavorites=$event" (filters)="filtersInputFunc($event)"></app-advanced-filters>


  <!-- Contracts Modal -->
  <app-contracts></app-contracts>
